###########################
# Mexico Events
# By Tristan 'Enjoy' Edge, aged 30 and 2 months
###########################

add_namespace = mexico

# Mexico has nationalised the oil fields, Britain and America are informed that their oil companies are demanding compensation

country_event = {
	id = mexico.2
	title = mexico.2.title
	desc = mexico.2.desc
	
	picture = GFX_report_event_journalists_speech
	
	is_triggered_only = yes

	option = {
		name = mexico.2.b
		
		add_opinion_modifier = {
			target = FROM
			modifier = embargo
		}
		
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = embargo
			}
			country_event = {
				days = 1
				id = mexico.3
			}
		}
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.5
				has_war = yes
			}
			modifier = {
				factor = 0
				has_government = communism
				FROM = {
					has_government = communism
				}
			}
		}
	}
}

# Mexico is informed that they are under embargo

country_event = {
	id = mexico.3
	title = mexico.3.title
	desc = mexico.3.desc
	
	picture = GFX_report_event_merchant_ship_01
	
	is_triggered_only = yes

	option = {
		name = mexico.3.a

		if = {
			limit = {
				NOT = {
					has_global_flag = flag_mexico_embargo_has_incited_cedillo
				}
			}
			set_global_flag = flag_mexico_embargo_has_incited_cedillo
			MEX_increase_cedillo_tension = yes # Supposedly, Cedillo rebelled because he thought the imperial powers would support him after the oil nationalisation
		}
	}
}

# Mexico has compensated the oil firms, Britain and America are informed and must lift any embargo or face political pressure

country_event = {
	id = mexico.4
	title = mexico.4.title
	desc = mexico.4.desc
	
	picture = GFX_report_event_FDR_speech
	
	is_triggered_only = yes

	option = {
		name = mexico.4.a
		
		if = {
			limit = {
				has_opinion_modifier = embargo
			}
			
			remove_opinion_modifier = { target = FROM modifier = embargo }
			
			FROM = {
				remove_opinion_modifier = { target = ROOT modifier = embargo }
			}
		}
		
		ai_chance = {
			factor = 80
		}
	}
}

# Mexico asks to join someone's faction via focus

country_event = {
	id = mexico.8
	title = mexico.8.title
	desc = mexico.8.desc
	
	picture = GFX_report_event_canadian_tank
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			save_event_target_as = alliance_inviter
			FROM = { save_event_target_as = alliance_applicant }
		}
	}
	
	option = {
		name = mexico.8.a
		
		if = {
			limit = {
				original_tag = ENG
			}
			add_to_tech_sharing_group = MEX_ENG_tech_group
			
			FROM = {
				add_to_tech_sharing_group = MEX_ENG_tech_group
			}
		}
		
		if = {
			limit = {
				original_tag = GER
			}
			add_to_tech_sharing_group = MEX_GER_tech_group
			
			FROM = {
				add_to_tech_sharing_group = MEX_GER_tech_group
			}
		}
		
		if = {
			limit = {
				original_tag = SOV
			}
			add_to_tech_sharing_group = MEX_SOV_tech_group
			
			FROM = {
				add_to_tech_sharing_group = MEX_SOV_tech_group
			}
		}
		
		if = {
			limit = {
				original_tag = USA
			}
			add_to_tech_sharing_group = MEX_USA_tech_group
			
			FROM = {
				add_to_tech_sharing_group = MEX_USA_tech_group
			}
		}
		
		if = {
			limit = {
				is_faction_leader = yes
			}
			add_to_faction = FROM
			hidden_effect = {
				news_event = { id = news.289 hours = 12 }
			}
			FROM = { country_event = { id = generic.3 hours = 6 } }
		}
		
		if = {
			limit = {
				is_faction_leader = no
			}
			random_other_country = {
				limit = {
					is_in_faction_with = ROOT
					is_faction_leader = yes
				}
				country_event = {
					id = mexico.9
					days = 1
				}
			}
		}
		
		ai_chance = {
			factor = 75
			modifier = {
				factor = 2.0
				has_war = yes
			}
			modifier = {
				factor = 0.5
				MEX = {
					has_war = yes
					any_enemy_country = {
						NOT = {
							has_war_with = ROOT
						}
					}
				}
			}
			modifier = {
				factor = 0
				MEX = {
					has_war = yes
					any_enemy_country = {
						NOT = {
							has_war_with = ROOT
						}
						OR = {
							has_government = ROOT
							is_major = yes
						}
					}
				}
			}
		}
	}
	
	option = {
		name = mexico.8.b
		
		FROM = { 
			country_event = { id = generic.4 hours = 6 }
		}
		
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0.1
				MEX = {
					OR = {
						has_government = ROOT
						is_major = yes
						is_ai = no
					}
				}
			}
		}
	}
}

# Mexico is being sponsored to join a faction by a third party (ENG/GER/SOV/USA)
# Attempt to catch a request to USA going to ENG, but knowing HoI4 anything could happen

country_event = {
	id = mexico.9
	title = mexico.9.title
	desc = mexico.9.desc
	
	picture = GFX_report_event_soviet_soldiers_tank
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			save_event_target_as = alliance_inviter
		}
	}
	
	option = {
		name = mexico.9.a

		add_to_faction = MEX
				
		hidden_effect = {
			news_event = { id = news.289 hours = 12 }
		}
		
		MEX = { country_event = { id = generic.3 hours = 6 } }
		
		ai_chance = {
			factor = 90
			modifier = {
				factor = 2.0
				has_war = yes
			}
			modifier = {
				factor = 0.5
				MEX = {
					has_war = yes
					any_enemy_country = {
						NOT = {
							has_war_with = ROOT
						}
					}
				}
			}
			modifier = {
				factor = 0
				MEX = {
					has_war = yes
					any_enemy_country = {
						NOT = {
							has_war_with = ROOT
						}
						OR = {
							has_government = ROOT
							is_major = yes
						}
					}
				}
			}
		}
	}
	
	option = {
		name = mexico.9.b
				
		FROM = { 
			country_event = { id = generic.4 hours = 6 }
		}
		
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0.1
				MEX = {
					OR = {
						has_government = ROOT
						is_major = yes
						is_ai = no
					}
				}
			}
		}
	}
}

# Mexico asks Britain to sell Belize after aligning towards them

country_event = {
	id = mexico.12
	title = mexico.12.title
	desc = mexico.12.desc
	
	picture = GFX_report_event_generic_conference
	
	is_triggered_only = yes
	
	option = {
		name = mexico.12.a
		
		311 = {
			set_state_name = "Belice"
		}
		
		add_political_power = 25
		
		MEX = {
			transfer_state = 311
			add_state_core = 311
			country_event = {
				id = mexico.13
				days = 1
			}
		}
		
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 2.0
				has_government = FROM
			}
			
			modifier = {
				factor = 2.0
				is_in_faction_with = FROM
			}
		}
	}
}

# Mexico is informed that Belize was granted to them

country_event = {
	id = mexico.13
	title = mexico.13.title
	desc = mexico.13.desc
	
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {
		name = mexico.13.a
	}
}

# Archbishop Pascual Díaz y Barreto passes away

country_event = {
	id = mexico.15
	title = mexico.15.title
	desc = mexico.15.desc
	
	picture = GFX_report_event_europe_funeral
	
	fire_only_once = yes
	
	trigger = {
		tag = MEX
		has_dlc = "Man the Guns"
	}
	
	mean_time_to_happen = {
		months = 6 # Historically died in May 1936
	}
	
	option = {
		name = mexico.15.a # Rest in peace
		
		MEX_increase_church_power = yes
		
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0.1
				has_completed_focus = MEX_focus_state_education
			}
			modifier = {
				factor = 10
				OR = {
					has_idea = MEX_church_power_2
					has_idea = MEX_church_power_1
				}
				NOT = { has_global_flag = flag_second_mexican_civil_war }
			}
		}
	}
	option = {
		name = mexico.15.b # Burn in hell
		
		MEX_decrease_church_power = yes
		
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0.1
				has_completed_focus = MEX_focus_antidisestablishmentarianism
			}
			modifier = {
				factor = 10
				OR = {
					has_idea = MEX_church_power_4
					has_idea = MEX_church_power_5
				}
				NOT = { has_global_flag = flag_second_mexican_civil_war }
			}
		}
	}
}

# Oil worker strike

country_event = {
	id = mexico.16
	title = mexico.16.title
	desc = mexico.16.desc
	
	picture = GFX_report_event_american_hunger_march
	
	fire_only_once = yes
	
	trigger = {
		tag = MEX
		
		date > 1937.1.1
		
		NOT = {
			OR = {
				has_completed_focus = MEX_focus_strike_breaking

				has_completed_focus = MEX_focus_royal_dutch_shell
				
				has_completed_focus = MEX_focus_nationalize_the_oil_fields
				
				focus_progress = {
					focus = MEX_focus_royal_dutch_shell
					progress > 0.01
				}
				
				focus_progress = {
					focus = MEX_focus_nationalize_the_oil_fields
					progress > 0.01
				}
			}
		}
		has_dlc = "Man the Guns"
	}
	
	mean_time_to_happen = {
		months = 12 # Historically started in November 1937
	}
	
	option = {
		name = mexico.16.a # Support the strikers
		
		if = {
			limit = {
				OR = {
					has_idea = MEX_cedillo_tension
					has_idea = MEX_cedillo_tension_2
					has_idea = MEX_cedillo_tension_3
				}
			}
			MEX_increase_cedillo_tension = yes # Supposedly, Cedillo rebelled because he thought the imperial powers would support him after the oil nationalisation
			add_political_power = -100
		}
		else = {
			add_political_power = -150
		}
		
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = mexico.16.b # Support the oil companies
		
		add_stability = -0.1
		
		ai_chance = {
			factor = 0
		}
	}
}

# The 1940 election begins
# First the player is asked if he wants to change the law to remain in office a second term
# Doing so is likely to incite a second revolution (Diaz reigned for 30 years)

country_event = {
	id = mexico.18
	title = mexico.18.title
	desc = mexico.18.desc
	
	picture = GFX_report_event_election_vote
	
	is_triggered_only = yes

	trigger = {
		original_tag = MEX
		date < 1942.1.1
		has_dlc = "Man the Guns"
	}
	
	option = {
		name = mexico.18.a
		
		country_event = {
			id = mexico.19
			days = 1
		}
		
		ai_chance = {
			factor = 75
		}
	}
	
	option = {
		name = mexico.18.b
		
		add_stability = -0.03
		
		if = {
			limit = {
				has_government = democratic
			}
			set_politics = {
				ruling_party = democratic
				elections_allowed = yes
			}
		}
		
		if = {
			limit = {
				has_government = neutrality
			}
			set_politics = {
				ruling_party = neutrality
				elections_allowed = yes
			}
		}
		
		if = {
			limit = {
				has_government = fascism
			}
			set_politics = {
				ruling_party = fascism
				elections_allowed = no
			}
		}
		
		if = {
			limit = {
				has_government = communism
			}
			set_politics = {
				ruling_party = communism
				elections_allowed = no
			}
		}
		
		ai_chance = {
			factor = 25
			
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

# The successor is now selected. Will depend on the choice of policies and current leader.
# The previous event implies the law on successors is being strictly applied so candidates are not eligible if they have been president before!

country_event = {
	id = mexico.19
	title = mexico.19.title
	desc = mexico.19.desc
	
	picture = GFX_report_event_election_vote
	
	is_triggered_only = yes
	
	# Neutrality
	
	option = { # Left-wing successor: Francisco Múgica
		name = mexico.19.a
		
		trigger = {
			NOT = {
				has_country_leader = {
					name = "Francisco Múgica"
				}
			}
			has_government = neutrality
		}

		create_country_leader = {
			name = "Francisco Múgica"
			desc = "POLITICS_FRANCISCO_MUGICA_DESC"
			picture = "GFX_portrait_mex_francisco_mugica"
			expire = "1965.1.1"
			ideology = moderatism
			traits = {
				revolutionary_general
			}
		}
		
		hidden_effect = { # Juan Andreu complains he was not selected
			if = {
				limit = {
					USA = {
						is_subject = no
						exists = yes
						NOT = {
							has_war_with = ROOT
						}
					}
				}
				country_event = {
					id = mexico.20
					days = 1
				}
			}
		}
	}
	
	option = { # Compromise successor: Manuel Ávila
		name = mexico.19.b
		
		trigger = {
			NOT = {
				has_country_leader = {
					name = "Manuel Ávila Camacho"
				}
			}
			has_government = neutrality
		}

		create_country_leader = {
			name = "Manuel Ávila Camacho"
			desc = "POLITICS_MANUEL_AVILA_DESC"
			picture = "GFX_portrait_mex_avila_civil"
			expire = "1965.1.1"
			ideology = oligarchism
			traits = {
				the_gentleman_president
			}
		}
		
		hidden_effect = { # Juan Andreu complains he was not selected
			if = {
				limit = {
					USA = {
						is_subject = no
						exists = yes
						NOT = {
							has_war_with = ROOT
						}
					}
				}
				country_event = {
					id = mexico.20
					days = 1
				}
			}
		}
	}
	
	option = { # Right-wing successor: Saturnino Cedillo
		name = mexico.19.c
		
		trigger = {
			NOT = {
				has_global_flag = flag_mexico_cedillo_has_revolted
			}
			has_government = neutrality
			NOT = {
				has_country_leader = {
					name = "Saturnino Cedillo"
				}
			}
		}

		create_country_leader = {
			name = "Saturnino Cedillo"
			desc = "POLITICS_SATURNINO_CEDILLO_DESC"
			picture = "GFX_portrait_mex_saturnino_cedillo"
			expire = "1965.1.1"
			ideology = oligarchism
			traits = {
				strongman_of_san_luis_potosi
			}
		}
	}
	
	option = { # Far-right candidate: Juan Andreu
		name = mexico.19.d
		
		trigger = {
			NOT = {
				has_country_leader = {
					name = "Juan Andreu"
				}
			}
			has_government = neutrality
		}

		create_country_leader = {
			name = "Juan Andreu"
			desc = "POLITICS_JUAN_ANDREU_DESC"
			picture = "GFX_portrait_mex_juan_andreu"
			expire = "1965.1.1"
			ideology = oligarchism
			traits = {
				the_silver_president
			}
		}
	}

	# Democratic
	
	option = { # Far-left successor: Vicente Lombardo
		name = mexico.19.e
		
		trigger = {
			NOT = {
				has_country_leader = {
					name = "Vicente Lombardo"
				}
			}
			has_government = democratic
		}

		create_country_leader = {
			name = "Vicente Lombardo"
			desc = "POLITICS_VICENTE_LOMBARDO_DESC"
			picture = "GFX_portrait_mex_vicente_lombardo"
			expire = "1965.1.1"
			ideology = socialism
			traits = {
				the_dean_of_mexican_marxism
			}
		}
		
		hidden_effect = { # Juan Andreu complains he was not selected
			if = {
				limit = {
					USA = {
						is_subject = no
						exists = yes
						NOT = {
							has_war_with = ROOT
						}
					}
				}
				country_event = {
					id = mexico.20
					days = 1
				}
			}
		}
		
		ai_chance = {
			factor = 10
		}
	}
	
	option = { # Left-wing successor: Francisco Múgica
		name = mexico.19.f
		
		trigger = {
			NOT = {
				has_country_leader = {
					name = "Francisco Múgica"
				}
			}
			has_government = democratic
		}

		create_country_leader = {
			name = "Francisco Múgica"
			desc = "POLITICS_FRANCISCO_MUGICA_DESC"
			picture = "GFX_portrait_mex_francisco_mugica"
			expire = "1965.1.1"
			ideology = socialism
			traits = {
				revolutionary_general
			}
		}
		
		hidden_effect = { # Juan Andreu complains he was not selected
			if = {
				limit = {
					USA = {
						is_subject = no
						exists = yes
						NOT = {
							has_war_with = ROOT
						}
					}
				}
				country_event = {
					id = mexico.20
					days = 1
				}
			}
		}
		
		ai_chance = {
			factor = 30
		}
	}
	
	option = { # Right-wing successor: Manuel Ávila
		name = mexico.19.g
		
		trigger = {
			NOT = {
				has_country_leader = {
					name = "Manuel Ávila Camacho"
				}
			}
			has_government = democratic
		}

		create_country_leader = {
			name = "Manuel Ávila Camacho"
			desc = "POLITICS_MANUEL_AVILA_DESC"
			picture = "GFX_portrait_mex_avila_civil"
			expire = "1965.1.1"
			ideology = conservatism
			traits = {
				the_gentleman_president
			}
		}
		
		hidden_effect = { # Juan Andreu complains he was not selected
			if = {
				limit = {
					USA = {
						is_subject = no
						exists = yes
						NOT = {
							has_war_with = ROOT
						}
					}
				}
				country_event = {
					id = mexico.20
					days = 1
				}
			}
		}
		
		ai_chance = {
			factor = 50
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
		}
	}
	
	option = { # Far-right candidate: Juan Andreu
		name = mexico.19.h
		
		trigger = {
			NOT = {
				has_country_leader = {
					name = "Juan Andreu"
				}
			}
			has_government = democratic
		}

		create_country_leader = {
			name = "Juan Andreu"
			desc = "POLITICS_JUAN_ANDREU_DESC"
			picture = "GFX_portrait_mex_juan_andreu"
			expire = "1965.1.1"
			ideology = conservatism
			traits = {
				the_silver_president
			}
		}
	}
}

# If a centre/left-wing neutral or democratic leader is selected, Juan Andreu complains (historic)
# Only triggered if America exists, is independent and not at war with Mexico (flavour text reasons)

country_event = {
	id = mexico.20
	title = mexico.20.title
	desc = mexico.20.desc
	
	picture = GFX_report_event_election_vote
	
	is_triggered_only = yes

	option = {
		name = mexico.20.a
	}
}

# Stalin is informed that Trotsky has been apprehended by Mexico and extradited

country_event = {
	id = mexico.21
	title = mexico.21.title
	desc = mexico.21.desc
	
	picture = GFX_report_event_stalin_propaganda
	
	is_triggered_only = yes

	immediate = {
		set_global_flag = trotsky_dead
	}
	
	option = {
		name = mexico.21.a
	}
}

# USSR is inviting Trotsky to return and lead their anti-Stalin coup
# Mexico loses access to Trotsky

country_event = {
	id = mexico.22
	title = mexico.22.title
	desc = mexico.22.desc
	
	picture = GFX_report_event_soviet_purge_politicians
	
	fire_only_once = yes
	
	trigger = {
		tag = MEX
		has_global_flag = flag_trotsky_returning_to_ussr_from_mexico
		has_global_flag = flag_mexico_invited_trotsky_to_government
		NOT = {
			has_global_flag = trotsky_dead
		}
		has_dlc = "Man the Guns"
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = mexico.22.a
		
		if = {
			limit = {
				has_idea = MEX_leon_trotsky
			}			
			remove_ideas = MEX_leon_trotsky
			
			add_political_power = 100
		}
		
		set_global_flag = flag_trotsky_has_returned_to_ussr_from_mexico # Prevents taking Trotsky as Chief of Staff
		
		add_stability = 0.02 # Divisive to have a Russian Bolshevik cabinet minister (gave -0.03 on recruiting him)
		
		if = {
			limit = {
				has_country_leader = { name = "Leon Trotsky" }
			}
			create_country_leader = {
				name = "Hernán Laborde"
				desc = "POLITICS_HERNAN_LABORDE_DESC"
				picture = "GFX_Portrait_MEX_Hernan_Laborde"
				expire = "1965.1.1"
				ideology = leninism
				traits = {
					devoted_trotskyist
				}
			}
		}
	}
}

# Mexico is informed of the attacks by German submarines and gets the opportunity to enter the war against Germany

country_event = {
	id = mexico.24
	title = mexico.24.title
	desc = mexico.24.desc
	
	picture = GFX_report_event_merchant_ship_01
	
	is_triggered_only = yes

	option = {
		name = mexico.24.a # Join the war against Germany
		
		trigger = {
			NOT = {
				has_war_with = USA
			}
			is_in_faction = no
			has_dlc = "Man the Guns"
		}
		
		add_war_support = 0.01
		
		random_other_country = {
			limit = {
				is_in_faction_with = USA
				is_faction_leader = yes
			}
			country_event = {
				id = mexico.25
				days = 1
			}
		}
		
		ai_chance = {
			factor = 70
			
			modifier = {
				factor = 0.1
				USA = {
					surrender_progress > 0.1
				}
			}
			modifier = {
				factor = 0.5
				has_war = yes
			}
		}
	}
	
	option = {
		name = mexico.24.b # What can we do?
		
		add_stability = 0.01
		
		ai_chance = {
			factor = 30
			
			modifier = {
				factor = 0.5
				is_historical_focus_on = yes
			}
		}
	}
}

# USA's faction leader (ie USA or ENG) gets asked to add Mexico to the war against Germany

country_event = {
	id = mexico.25
	title = mexico.25.title
	desc = mexico.25.desc
	
	picture = GFX_report_event_merchant_ship_01
	
	is_triggered_only = yes
	
	option = {
		name = mexico.25.a # Every little helps
		
		trigger = {
			NOT = {
				has_war_with = MEX
			}
			has_dlc = "Man the Guns"
		}
		
		add_to_faction = MEX
		
		MEX = {
			add_to_war = {
				targeted_alliance = ROOT
				enemy = GER
			}
		}
		
		hidden_effect = {
			news_event = {
				id = mexico.26
				days = 1
			}
		}
		
		ai_chance = {
			factor = 85
			
			modifier = {
				factor = 0.5
				MEX = {
					has_war = yes
				}
			}
		}
	}
	
	option = {
		name = mexico.25.b # Mexico? Bahahaha
		
		add_political_power = 25
		
		ai_chance = {
			factor = 15
			
			modifier = {
				factor = 0.5
				is_historical_focus_on = yes
			}
		}
	}
}

# News event for Mexico joining the war against Germany after submarine attacks

news_event = {
	id = mexico.26
	title = mexico.26.title
	desc = mexico.26.desc
	
	picture = GFX_news_event_020
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = mexico.26.a
		
		trigger = {
			OR = {
				original_tag = MEX
				is_in_faction_with = MEX
				has_war_with = GER
			}
		}
	}
	option = {
		name = mexico.26.b
		
		trigger = {
			OR = {
				original_tag = GER
				is_in_faction_with = GER
				has_war_with = MEX
			}
		}
	}
	option = {
		name = mexico.26.c
		
		trigger = {
			NOT = {
				OR = {
					original_tag = MEX
					is_in_faction_with = MEX
					has_war_with = MEX
					original_tag = GER
					is_in_faction_with = GER
					has_war_with = GER
				}
			}
		}
	}
}

# Papal encyclical on Mexico issued by Pope Pius XI

country_event = {
	id = mexico.27
	title = mexico.27.title
	desc = mexico.27.desc
	
	picture = GFX_report_event_europe_funeral
	
	fire_only_once = yes
	
	trigger = {
		tag = MEX
		
		date > 1937.1.1
		
		has_civil_war = no

		NOT = {
			has_global_flag = flag_second_mexican_civil_war
		}
		has_dlc = "Man the Guns"
	}
	
	mean_time_to_happen = {
		months = 6 # Historically published 28 March 1937
	}
	
	option = {
		name = mexico.27.a # It is good that the anti-Church violence has ended.
		
		MEX_increase_church_power = yes
		
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				has_completed_focus = MEX_focus_state_education
			}
			modifier = {
				factor = 10
				OR = {
					has_idea = MEX_church_power_2
					has_idea = MEX_church_power_1
				}
				NOT = { has_global_flag = flag_second_mexican_civil_war }
			}
		}
	}
	option = {
		name = mexico.27.b # Superstitious propaganda, prevent publication of this treason!
		
		MEX_decrease_church_power = yes
		
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				has_completed_focus = MEX_focus_antidisestablishmentarianism
			}
			modifier = {
				factor = 10
				OR = {
					has_idea = MEX_church_power_4
					has_idea = MEX_church_power_5
				}
				NOT = { has_global_flag = flag_second_mexican_civil_war }
			}
		}
	}
}

# The renewed attacks on the church incite a Second Cristiada

country_event = {
	id = mexico.28
	title = mexico.28.title
	desc = mexico.28.desc
	
	picture = GFX_report_event_mex_civil_war
	
	fire_only_once = yes
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					has_government = communism
				}
				start_civil_war = {
					ideology = fascism
					size = 0.35
					keep_unit_leaders = { 700 701 702 703 704 705 706 707 708 709 710 711 712 }
				}
			}
			if = {
				limit = {
					has_government = fascism
				}
				start_civil_war = {
					ideology = democratic
					size = 0.35
					keep_unit_leaders = { 700 701 702 703 704 705 706 707 708 709 710 711 712 }
				}
			}
			if = {
				limit = {
					has_government = neutrality
				}
				start_civil_war = {
					ideology = democratic
					size = 0.35
					keep_unit_leaders = { 700 701 702 703 704 705 706 707 708 709 710 711 712 }
				}
			}
			random_other_country = {
				limit = {
					original_tag = MEX
					has_war_with = ROOT
				}
				MEX_remove_church_power = yes
				set_cosmetic_tag = MEX_cristero
				create_field_marshal = {
					name = "Jesús Degollado Guízar"
					gfx = "GFX_portrait_mex_jesus_degollado_guizar"
					traits = { war_hero trait_cautious }
					skill = 3
					attack_skill = 3
					defense_skill = 3
					planning_skill = 2
					logistics_skill = 2
				}
				create_corps_commander = { # Fictitious
					name = "Alberto Gorostieta Vega"
					portrait_path = "gfx/leaders/South America/Portrait_South_America_Generic_land_2.dds"
					traits = { war_hero }
					skill = 3
					attack_skill = 2
					defense_skill = 2
					planning_skill = 3
					logistics_skill = 3
				}
				create_corps_commander = { # Fictitious
					name = "Dionisio Navarro Anguiano"
					portrait_path = "gfx/leaders/South America/Portrait_South_America_Generic_land_1.dds"
					traits = { infantry_officer }
					skill = 3
					attack_skill = 3
					defense_skill = 2
					planning_skill = 3
					logistics_skill = 2
				}
				create_country_leader = {
					name = "Jesús Degollado Guízar"
					desc = "POLITICS_JESUS_DEGOLLADO_GUIZAR_DESC"
					picture = GFX_portrait_mex_jesus_degollado_guizar
					expire = "1965.1.1"
					ideology = falangism
					traits = {
						cristero_general
					}
				}
				create_country_leader = {
					name = "Luis María Martínez"
					desc = "POLITICS_LUIS_MARIA_MARTINEZ_DESC"
					picture = "GFX_portrait_MEX_Luis_Maria_Martinez"
					expire = "1965.1.1"
					ideology = socialism
					traits = {
						primate_of_mexico
					}
				}
				division_template = {
					name = "Guardia Cristera"
					division_names_group = MEX_INF_01
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
					}
					priority = 0
				}
				random_owned_controlled_state = {
					create_unit = {
						division = "division_template = \"Guardia Cristera\" start_experience_factor = 0.2 force_equipment_variants = { infantry_equipment_0 = { owner = \"GER\" } }"
						owner = PREV
					}
				}
				random_owned_controlled_state = {
					create_unit = {
						division = "division_template = \"Guardia Cristera\" start_experience_factor = 0.2 force_equipment_variants = { infantry_equipment_0 = { owner = \"USA\" } }"
						owner = PREV
					}
				}
				random_owned_controlled_state = {
					create_unit = {
						division = "division_template = \"Guardia Cristera\" start_experience_factor = 0.2 force_equipment_variants = { infantry_equipment_0 = { owner = \"ITA\" } }"
						owner = PREV
					}
				}
				random_owned_controlled_state = {
					create_unit = {
						division = "division_template = \"Guardia Cristera\" start_experience_factor = 0.2 force_equipment_variants = { infantry_equipment_0 = { owner = \"GER\" } }"
						owner = PREV
					}
				}
				random_owned_controlled_state = {
					create_unit = {
						division = "division_template = \"Guardia Cristera\" start_experience_factor = 0.2 force_equipment_variants = { infantry_equipment_0 = { owner = \"USA\" } }"
						owner = PREV
					}
				}
				random_owned_controlled_state = {
					create_unit = {
						division = "division_template = \"Guardia Cristera\" start_experience_factor = 0.2 force_equipment_variants = { infantry_equipment_0 = { owner = \"ITA\" } }"
						owner = PREV
					}
				}
				set_party_name = { ideology = fascism name = MEX_fascist_party_legionnaires_of_christ_short long_name = MEX_fascist_party_legionnaires_of_christ_long }
				set_party_name = { ideology = democratic name = MEX_democratic_party_national_action_party_short long_name = MEX_democratic_party_national_action_party_long }
			}
		}
	}

	option = {
		name = mexico.28.a # We should have stamped this treason out earlier!
		
		hidden_effect = {
			news_event = {
				id = mexico.29
				days = 1
			}
		}
	}
}

# News event for Second Cristiada

news_event = {
	id = mexico.29
	title = mexico.29.title
	desc = mexico.29.desc
	
	picture = GFX_news_event_mex_civil_war
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = mexico.29.a
		
		trigger = {
			OR = {
				original_tag = MEX
				is_in_faction_with = MEX
			}
			has_dlc = "Man the Guns"
		}
	}
	option = {
		name = mexico.29.b
		
		trigger = {
			has_war_with = MEX
		}
	}
	option = {
		name = mexico.29.c
		
		trigger = {
			NOT = {
				OR = {
					original_tag = MEX
					is_in_faction_with = MEX
					has_war_with = MEX
				}
			}
		}
	}
}

# News event for Second Mexican Revolution

news_event = {
	id = mexico.31
	title = mexico.31.title
	desc = mexico.31.desc
	
	picture = GFX_news_event_mex_civil_war
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = mexico.31.a
		
		trigger = {
			OR = {
				original_tag = MEX
				is_in_faction_with = MEX
			}
		}
	}
	option = {
		name = mexico.31.b
		
		trigger = {
			has_war_with = MEX
		}
	}
	option = {
		name = mexico.31.c
		
		trigger = {
			NOT = {
				OR = {
					original_tag = MEX
					is_in_faction_with = MEX
					has_war_with = MEX
				}
			}
		}
	}
}

# Zoot Suit Riots occur in America

country_event = {
	id = mexico.32
	title = mexico.32.title
	desc = mexico.32.desc
	
	picture = GFX_report_event_mex_civil_war
	
	fire_only_once = yes
	
	trigger = {
		tag = USA
		
		date > 1941.1.1
		
		has_war = yes # Ostensibly over fabrics in short supply during wartime. Sumptuary laws help create an orderly and peaceful society under God
		
		has_government = democratic # Bigger concerns if they are fascists or communists
		
		country_exists = MEX
		
		NOT = {
			has_war_with = MEX
		}
		has_dlc = "Man the Guns"
	}
	
	mean_time_to_happen = {
		months = 24 # Historically June 1943
	}
	
	option = {
		name = mexico.32.a
		
		add_stability = 0.01
		add_political_power = -25
		
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0.5
				is_historical_focus_on = yes
			}
		}
	}
	
	option = {
		name = mexico.32.b
		
		add_stability = -0.01
		add_war_support = 0.01
		
		MEX = {
			country_event = {
				days = 1
				id = mexico.33
			}
		}
		
		ai_chance = {
			factor = 50
		}
	}
}

country_event = {
	id = mexico.33
	title = mexico.33.title
	desc = mexico.33.desc
	
	picture = GFX_report_event_mex_civil_war
	
	is_triggered_only = yes

	option = {
		name = mexico.33.a
		
		MEX_decrease_church_power = yes
		
		add_stability = -0.01
		add_war_support = 0.01
		
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 2.0
				is_in_faction_with = FROM
			}
			modifier = {
				factor = 0.1
				has_government = fascism
			}
			modifier = {
				factor = 10
				OR = {
					has_idea = MEX_church_power_4
					has_idea = MEX_church_power_5
				}
				NOT = { has_global_flag = flag_second_mexican_civil_war }
			}
		}
	}
	
	option = {
		name = mexico.33.b
		
		add_stability = 0.01
		add_war_support = -0.01
		
		add_opinion_modifier = {
			target = FROM
			modifier = protest_action
		}
		
		reverse_add_opinion_modifier = {
			target = FROM
			modifier = protest_action
		}
		
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 2.0
				NOT = {
					has_government = FROM
				}
			}
		}
	}
}

# Germany is asked if they want to give Mexico tank licences for closer relations

country_event = {
	id = mexico.34
	title = mexico.34.title
	desc = mexico.34.desc
	
	picture = GFX_report_event_generic_panzer_attack
	
	is_triggered_only = yes

	option = {
		name = mexico.34.a
		
		trigger = {
			NOT = {
				has_war_with = MEX
			}
		}
		
		effect_tooltip = {
			add_opinion_modifier = {
				target = MEX
				modifier = mexico_german_resource_exchange
			}
			
			MEX = {
				add_opinion_modifier = {
					target = ROOT
					modifier = mexico_german_resource_exchange
				}
			}
			MEX = {
				add_tech_bonus = {
					name = armor
					bonus = 1.0
					uses = 2
					category = armor
				}
			}
			MEX = {
				give_resource_rights = { receiver = GER state = 476 }
				country_event = {
					days = 1
					id = mexico.35
				}
			}
		}
		
		hidden_effect = {
			MEX = {
				country_event = {
					days = 1
					id = mexico.35
				}
			}
		}
			
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 2.0
				has_government = FROM
			}

			modifier = {
				factor = 2.0
				FROM = {
					is_in_faction = no
				}
			}
		}
	}
	
	option = {
		name = mexico.34.b
		
		MEX = {
			country_event = {
				days = 1
				id = mexico.36
			}
		}
		
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0
				FROM = {
					is_in_faction_with = ROOT
				}
			}

			modifier = {
				factor = 2.0
				FROM = {
					is_enemy_ideology = yes
				}
			}

			modifier = {
				factor = 2.0
				FROM = {
					is_in_faction_with = USA
				}
			}
			
			modifier = {
				factor = 2.0
				FROM = {
					is_in_faction_with = ENG
				}
			}
			
			modifier = {
				factor = 2.0
				FROM = {
					is_in_faction_with = SOV
				}
			}
		}
	}
}

# Mexico is informed Germany is giving them free tank licences

country_event = {
	id = mexico.35
	title = mexico.35.title
	desc = mexico.35.desc
	
	picture = GFX_report_event_generic_panzer_attack
	
	is_triggered_only = yes

	option = {
		name = mexico.35.a
		
		add_opinion_modifier = {
			target = GER
			modifier = mexico_german_resource_exchange
		}
	
		GER = {
			add_opinion_modifier = {
				target = ROOT
				modifier = mexico_german_resource_exchange
			}
			
			add_tech_bonus = {
				category = armor
				uses = 2
				bonus = 1 
				name = armor 
			}


			give_resource_rights = { receiver = GER state = 476 }
		}
	}
}

# Mexico is informed Germany refuses to give tank licences for free

country_event = {
	id = mexico.36
	title = mexico.36.title
	desc = mexico.36.desc
	
	picture = GFX_report_event_generic_panzer_attack
	
	is_triggered_only = yes

	option = {
		name = mexico.36.a
	}
}

# Operation Just Cause - Mexico seizes the Panama Canal and is informed of success

country_event = {
	id = mexico.40
	title = mexico.40.title
	desc = mexico.40.desc
	
	picture = GFX_report_event_soviet_soldiers_tank
	
	is_triggered_only = yes

	option = {
		name = mexico.40.a
		
		transfer_state = 685

		add_war_support = 0.05

		army_experience = 25
	}
}

# Operation Just Cause succeeded - America gets opportunity to retaliate

country_event = {
	id = mexico.41
	title = mexico.41.title
	desc = mexico.41.desc
	
	picture = GFX_report_event_soviet_soldiers_tank
	
	is_triggered_only = yes
	
	option = {
		name = mexico.41.a
				
		army_experience = 25

		add_political_power = 100
		
		add_opinion_modifier = {
			target = MEX
			modifier = embargo
		}
		
		MEX = {
			add_opinion_modifier = {
				target = ROOT
				modifier = embargo
			}
		}
		
		set_global_flag = flag_america_plans_to_punish_mexico_for_canal_attack

		hidden_effect = {
			news_event = {
				id = mexico.44
			}
		}

		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				is_historical_focus_on = yes
			}
		}
	}
	
	option = {
		name = mexico.41.b
		
		army_experience = 25

		add_war_support = 0.05
		
		create_wargoal = {
			type = puppet_wargoal_focus
			target = MEX
		}
		
		add_opinion_modifier = {
			target = MEX
			modifier = embargo
		}
		
		MEX = {
			add_opinion_modifier = {
				target = ROOT
				modifier = embargo
			}
		}
		
		set_global_flag = flag_america_ignores_mexican_attack_on_canal

		hidden_effect = {
			news_event = {
				id = mexico.44
			}
		}

		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				has_war = yes
			}
		}
	}
}

# Operation Just Cause - Mexican attack on Panama Canal failed

country_event = {
	id = mexico.42
	title = mexico.42.title
	desc = mexico.42.desc
	
	picture = GFX_report_event_soviet_soldiers_tank
	
	is_triggered_only = yes

	option = {
		name = mexico.42.a
		
		add_war_support = -0.05

		army_experience = 25
	}
}

# Operation Just Cause failed - America gets opportunity to retaliate

country_event = {
	id = mexico.43
	title = mexico.43.title
	desc = mexico.43.desc
	
	picture = GFX_report_event_usa_macarthur_speech
	
	is_triggered_only = yes
	
	option = {
		name = mexico.43.a
				
		army_experience = 25
		
		add_opinion_modifier = {
			target = MEX
			modifier = embargo
		}
		
		MEX = {
			add_opinion_modifier = {
				target = ROOT
				modifier = embargo
			}
		}
		
		set_global_flag = flag_america_plans_to_punish_mexico_for_canal_attack

		hidden_effect = {
			news_event = {
				id = mexico.45
			}
		}

		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				is_historical_focus_on = yes
			}
		}
	}
	
	option = {
		name = mexico.43.b
		
		army_experience = 25
		
		create_wargoal = {
			type = puppet_wargoal_focus
			target = MEX
		}
		
		add_opinion_modifier = {
			target = MEX
			modifier = embargo
		}
		
		MEX = {
			add_opinion_modifier = {
				target = ROOT
				modifier = embargo
			}
		}
		
		set_global_flag = flag_america_ignores_mexican_attack_on_canal

		hidden_effect = {
			news_event = {
				id = mexico.45
			}
		}

		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				has_war = yes
			}
		}
	}
}

# News event for a successful seizure of Panama Canal

news_event = {
	id = mexico.44
	title = mexico.44.title

	desc = { # 
		text = mexico.44.desc1
		trigger = {
			has_global_flag = flag_america_plans_to_punish_mexico_for_canal_attack
		}
	}
	desc = { # 
		text = mexico.44.desc2
		trigger = {
			has_global_flag = flag_america_ignores_mexican_attack_on_canal
		}
	}
	
	picture = GFX_news_event_039
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = mexico.44.a
		
		trigger = {
			OR = {
				original_tag = MEX
				is_in_faction_with = MEX
			}
		}
	}
	option = {
		name = mexico.44.b
		
		trigger = {
			OR = {
				original_tag = USA
				is_in_faction_with = USA
			}
		}
	}
	option = {
		name = mexico.44.c
		
		trigger = {
			NOT = {
				OR = {
					original_tag = MEX
					is_in_faction_with = MEX
					original_tag = USA
					is_in_faction_with = USA
				}
			}
		}
	}
}

# News event for the seizure of Panama Canal failing

news_event = {
	id = mexico.45
	title = mexico.45.title

	desc = { # 
		text = mexico.45.desc1
		trigger = {
			has_global_flag = flag_america_plans_to_punish_mexico_for_canal_attack
		}
	}
	desc = { # 
		text = mexico.45.desc2
		trigger = {
			has_global_flag = flag_america_ignores_mexican_attack_on_canal
		}
	}
	
	picture = GFX_news_event_usa_japan_at_war
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = mexico.45.a
		
		trigger = {
			OR = {
				original_tag = MEX
				is_in_faction_with = MEX
			}
		}
	}
	option = {
		name = mexico.45.b
		
		trigger = {
			OR = {
				original_tag = USA
				is_in_faction_with = USA
			}
		}
	}
	option = {
		name = mexico.45.c
		
		trigger = {
			NOT = {
				OR = {
					original_tag = MEX
					is_in_faction_with = MEX
					original_tag = USA
					is_in_faction_with = USA
				}
			}
		}
	}
}

# News event for Mexico creating Latin American Order faction

news_event = {
	id = mexico.46
	title = mexico.46.title
	desc = mexico.46.desc
	
	picture = GFX_news_event_053
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = mexico.46.a
		
		trigger = {
			OR = {
				original_tag = MEX
				is_in_faction_with = MEX
			}
		}
	}
	option = {
		name = mexico.46.b
		
		trigger = {
			has_war_with = MEX
		}
	}
	option = {
		name = mexico.46.c
		
		trigger = {
			NOT = {
				OR = {
					original_tag = MEX
					is_in_faction_with = MEX
					has_war_with = MEX
				}
			}
		}
	}
}

# News event for Mexico creating Bolivarian Alliance

news_event = {
	id = mexico.47
	title = mexico.47.title
	desc = mexico.47.desc
	
	picture = GFX_news_event_gathering_protest
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = mexico.46.a
		
		trigger = {
			OR = {
				original_tag = MEX
				is_in_faction_with = MEX
			}
		}
	}
	option = {
		name = mexico.46.b
		
		trigger = {
			has_war_with = MEX
		}
	}
	option = {
		name = mexico.46.c
		
		trigger = {
			NOT = {
				OR = {
					original_tag = MEX
					is_in_faction_with = MEX
					has_war_with = MEX
				}
			}
		}
	}
}

# Mexico sends a shipment of military supplies to a Spanish Civil War participant

country_event = {
	id = mexico.50
	title = mexico.50.title
	desc = mexico.50.desc
	
	picture = GFX_report_event_merchant_ship_01
	
	is_triggered_only = yes
	
	option = {
		name = mexico.50.a

		add_equipment_to_stockpile = {
			type = infantry_equipment_0
			amount = 250
			producer = "MEX"
		}
	}
}

# Shipment intended for Spain is sunk

country_event = {
	id = mexico.51
	title = mexico.51.title
	desc = mexico.51.desc
	
	picture = GFX_report_event_merchant_ship_01

	is_triggered_only = yes

	option = {
		name = mexico.51.a
	}
}

country_event = {
	id = mexico.52
	title = mexico.52.title
	desc = {
		text = mexico.52.desc_not_trotsky
		trigger = {
			NOT = {
				MEX = {
					has_country_leader = { ruling_only = yes name = "Leon Trotsky" }
				}			
			}	
		}
	}
	desc = {
		text = mexico.52.desc_trotsky
		trigger = {			
			MEX = {
				has_country_leader = { ruling_only = yes name = "Leon Trotsky" }
			}				
		}
	}		
	picture = GFX_report_event_soviet_purge_politicians

	is_triggered_only = yes

	option = { #ask other communist faction leaders to dismantle their faction and join Trotsky
		name = mexico.52.a
		every_other_country = {
			limit = {
				is_in_faction_with = ROOT
			}
			country_event = {
				id = mexico.53
			}
		}
		dismantle_faction = yes
		MEX = {
			add_to_faction = PREV
		}
		ai_chance = {
			factor = 70
		}		
	}	
	option = {
		name = mexico.52.b #Never! Stalinism best -ism.
		ai_chance = {
			factor = 30
		}		
	}
}

news_event = {
	id = mexico.57
	title = mexico.57.title
	desc = mexico.57.desc
	
	picture = GFX_news_event_023
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = mexico.57.a
		
		trigger = {
			OR = {
				original_tag = MEX
				is_in_faction_with = MEX
			}
		}
	}
	option = {
		name = mexico.57.b
		
		trigger = {
			OR = {
				original_tag = SOV
				is_in_faction_with = SOV
				has_war_with = MEX
			}
		}
	}
	option = {
		name = mexico.57.c
		
		trigger = {
			NOT = {
				OR = {
					original_tag = MEX
					is_in_faction_with = MEX
					has_war_with = MEX
					original_tag = SOV
					is_in_faction_with = SOV
				}
			}
		}
	}
}
